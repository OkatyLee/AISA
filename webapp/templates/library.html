<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—É—á–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="/static/app.js?v=2.6" defer></script>
    <link rel="stylesheet" href="/static/styles.css?v=2.6">
</head>
<body>
    <div id="app">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="sa-navigation">
            <button class="sa-nav-btn active" data-tab="library">
                <span class="nav-icon">üìö</span>
                <span class="nav-text-full">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</span>
                <span class="nav-text-short">–ë–∏–±–ª.</span>
            </button>
            <button class="sa-nav-btn" data-tab="search">
                <span class="nav-icon">üîç</span>
                <span class="nav-text-full">–ü–æ–∏—Å–∫</span>
                <span class="nav-text-short">–ü–æ–∏—Å–∫</span>
            </button>
            <button class="sa-nav-btn" data-tab="recommendations">
                <span class="nav-icon">üéØ</span>
                <span class="nav-text-full">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</span>
                <span class="nav-text-short">–†–µ–∫.</span>
            </button>
            <button class="sa-nav-btn" data-tab="chat">
                <span class="nav-icon">üí¨</span>
                <span class="nav-text-full">–ß–∞—Ç</span>
                <span class="nav-text-short">–ß–∞—Ç</span>
            </button>
        </nav>

        <!-- –í–∫–ª–∞–¥–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
        <div id="library-tab" class="sa-tab-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <header class="header">
                <h1>üìö –ú–æ—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</h1>
                <div class="user-info" id="userInfo"></div>
            </header>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-panel" id="statsPanel">
                <div class="stat-item">
                    <span class="stat-value" id="totalPapers">0</span>
                    <span class="stat-label">—Å—Ç–∞—Ç–µ–π</span>
                </div>
            </div>

            <!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ -->
            <div class="search-container">
                <input type="text" id="librarySearchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ..." class="search-input">
                <button id="clearLibrarySearch" class="clear-btn">‚úñ</button>
            </div>

            <!-- –§–∏–ª—å—Ç—Ä—ã -->
            <div class="filters">
                <select id="tagFilter" class="filter-select">
                    <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                </select>
                <select id="sortFilter" class="filter-select">
                    <option value="saved_at_desc">–ù–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏</option>
                    <option value="saved_at_asc">–°—Ç–∞—Ä—ã–µ –ø–µ—Ä–≤—ã–º–∏</option>
                    <option value="title_asc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é A-Z</option>
                    <option value="title_desc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é Z-A</option>
                </select>
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
            <div class="loading hidden" id="libraryLoading">
                <div class="spinner"></div>
                <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É...</p>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π -->
            <div class="papers-container hidden" id="libraryPapersContainer">
                <!-- –°—Ç–∞—Ç—å–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div class="pagination hidden" id="libraryPagination">
                <button id="libraryPrevPage" class="page-btn">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</button>
                <span id="libraryPageInfo" class="page-info">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
                <button id="libraryNextPage" class="page-btn">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</button>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—É—Å—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ -->
            <div class="empty-state" id="libraryEmptyState">
                <div class="empty-icon">üìñ</div>
                <h3>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—É—Å—Ç–∞</h3>
                <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫ –∏–ª–∏ —á–∞—Ç –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π</p>
                <button id="goToSearch" class="primary-btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∏—Å–∫—É</button>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ø–æ–∏—Å–∫–∞ -->
        <div id="search-tab" class="sa-tab-content">
            <header class="header">
                <h1>üîç –ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π</h1>
            </header>

            <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
            <div class="search-form">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π..." class="search-input">
                    <button id="executeSearch" class="search-btn">–ù–∞–π—Ç–∏</button>
                </div>

                <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ -->
                <div class="search-filters">
                    <select id="sourceFilter" class="filter-select">
                        <option value="">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
                        <option value="arxiv">ArXiv</option>
                        <option value="ieee">IEEE Xplore</option>
                        <option value="ncbi">PubMed</option>
                        <option value="semantic_scholar">Semantic Scholar</option>
                    </select>
                    
                    <input type="text" id="authorFilter" placeholder="–ê–≤—Ç–æ—Ä" class="filter-input">
                    <input type="number" id="yearFilter" placeholder="–ì–æ–¥" class="filter-input" min="1900" max="2025">
                    <input type="number" id="limitFilter" placeholder="–õ–∏–º–∏—Ç" class="filter-input" min="1" max="50" value="10">
                </div>
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∏—Å–∫–∞ -->
            <div class="loading hidden" id="searchLoading">
                <div class="spinner"></div>
                <p>–í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–∏—Å–∫...</p>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
            <div class="papers-container" id="searchResultsContainer">
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
        <div id="recommendations-tab" class="sa-tab-content">
            <header class="header">
                <h1>üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h1>
            </header>

            <div class="recommendations-controls">
                <p class="info-text">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –≤–∞—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —Å—Ç–∞—Ç–µ–π</p>
                <button id="generateRecommendations" class="primary-btn">–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
            <div class="loading hidden" id="recommendationsLoading">
                <div class="spinner"></div>
                <p>–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏...</p>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
            <div class="papers-container" id="recommendationsContainer">
                <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ —á–∞—Ç–∞ -->
        <div id="chat-tab" class="sa-tab-content">
            <header class="header">
                <h1>üí¨ AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç </h1>
            </header>

            <!-- –û–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
            <div class="chat-container" id="chatContainer">
                <div class="chat-messages" id="chatMessages">
                    <div class="message bot-message">
                        <div class="message-content">
                            –ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –Ω–∞—É—á–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, –∏ —è –ø–æ–º–æ–≥—É –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—å–∏ –∏–ª–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.
                        </div>
                    </div>
                </div>

                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏ -->
                <div class="typing-indicator hidden" id="typingIndicator">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <span>–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–µ—á–∞—Ç–∞–µ—Ç...</span>
                </div>

                <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
                <div class="chat-input-container">
                    <input type="text" id="chatInput" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –æ–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç..." class="chat-input">
                    <button id="sendMessage" class="send-btn">üì§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç—å–∏ -->
    <div class="modal" id="paperModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏</h2>
                <button id="closeModal" class="close-btn">‚úñ</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            </div>
            <div class="modal-footer">
                <button id="openOriginal" class="primary-btn">–û—Ç–∫—Ä—ã—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª</button>
                <button id="saveToLibrary" class="save-btn hidden">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button id="deletePaper" class="delete-btn">üóë –£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>
</body>
</html>
