# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App

## üöÄ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

```bash
python run_api.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8000`

### 2.1

–í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ 
```bash
ngrok http 8000
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
python main.py
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Mini App

### –í –±–æ—Ç–µ:
1. `/library` - –æ—Ç–∫—Ä–æ–µ—Ç –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Mini App
2. –ù–∞–∂–º–∏—Ç–µ "üìö –û—Ç–∫—Ä—ã—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É"
3. Mini App –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ Telegram

### –í Mini App:
- üîç –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—å—è–º
- üìÇ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–µ–π
- üìñ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## üõ†Ô∏è API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /api/v1/library` - –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/v1/library/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
- `GET /api/v1/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `GET /api/v1/user/info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í–∞–ª–∏–¥–∞—Ü–∏—è initData —á–µ—Ä–µ–∑ HMAC-SHA256
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ Telegram
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –¥–æ–º–µ–Ω–∞ Telegram

## üìù –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
webapp/
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ app.js      # JavaScript –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ styles.css  # –°—Ç–∏–ª–∏ Mini App
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ library.html # HTML —à–∞–±–ª–æ–Ω
api/
‚îî‚îÄ‚îÄ main.py         # FastAPI —Å–µ—Ä–≤–µ—Ä
run_api.py          # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API:
```bash
# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
curl -X GET "http://localhost:8000/api/v1/library" \
  -H "X-Telegram-Init-Data: your_init_data"
```

### –õ–æ–≥–∏:
- API –ª–æ–≥–∏: `logs/api.log`
- –ë–æ—Ç –ª–æ–≥–∏: `logs/bot.log`

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ BotFather
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

2. **–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ BOT_TOKEN –≤ .env
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ initData

3. **–°—Ç–∏–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π

## üöÄ –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 8000
CMD ["python", "run_api.py"]
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
```env
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
WEBAPP_URL=https://yourdomain.com
```
